<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">
  <body>

    <metal:main fill-slot="main">

      <h2>Choose User</h2>

      <p>Search for a user by their username or full name:</p>

      <form id="user-search"
	    method="post">
	<input type="text" name="user-search" />
	<input type="submit" name="submit" value="Search" class="context" />
      </form>

      <div tal:condition="view/users">
	<p>Choose a user to submit the form on their behalf:</p>
	<form id="user-select"
	      method="post">
	  <tal:r tal:repeat="user view/users">
	    <input type="radio" 
		   name="user-select" 
		   tal:attributes="value user/id;
				   id string:user-result-${repeat/user/index}" />
	    <label tal:content="python:user.getProperty('fullname')"
		   tal:attributes="for string:user-result-${repeat/user/index}"
		   /><br />
	  </tal:r>
	  <br />
	  <input type="submit" name="submit" value="Continue" class="context" />
	</form>
      </div>

      <div tal:condition="view/no_users">
	<p>
	  <em>
	    No matching users were found.
	  </em>
	</p>
      </div>

    </metal:main>

  </body>
</html>
