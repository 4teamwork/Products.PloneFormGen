Integration tests
=================

Set up a test browser and log in as a manager::

    >>> from Products.Five.testbrowser import Browser
    >>> browser = Browser()
    >>> portal_url = 'http://nohost/plone'
    >>> self.app.acl_users.userFolderAddUser('root', 'secret', ['Manager'], [])
    >>> browser.addHeader('Authorization', 'Basic root:secret')

Standalone form
---------------

First set user role to manager::

    >>> self.setRoles(['Manager'])   

Add a new Form Folder::  

    >>> browser.open(portal_url)
    >>> browser.getLink('Form Folder').click()
    >>> browser.getControl('Title').value = 'testform'
    >>> browser.getControl('Save').click()

Now mark the subject input variable as a server side variable.
  
    >>> self.portal.testform.topic.setServer_side(True)
    >>> self.portal.testform.topic.value
    True

And confirm that it renders properly::
    
    >>> browser.url
    'http://nohost/plone/testform/...'
    
    >>> 'topic' in  browser.contents
    False